<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}"/>
    <title>Ordenacio Enquesta</title>
    <link href="../../../resources/css/bootstrap.min.css" rel="stylesheet" media="screen" th:href="@{/css/bootstrap.min.css}"/>
    <script src="http://code.jquery.com/jquery-latest.js"  th:src="@{/js/vendor/jquery-1.11.2.min.js}"></script>
    <script src="../../../resources/js/bootstrap.min.js" th:src="@{/js/vendor/bootstrap.min.js}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.js"></script>
</head>
<body>

<div th:replace="header :: header">Header</div>

<div class="container">

    <div class="block-title">
        <a class=""  th:href="@{'/enquestes'}" >Enquestes / </a> <span th:text="${enquesta.titol}">enquesta</span>
        <hr />
    </div>

    <h4>Ordenar preguntes</h4>
    <h5>Arrosega els enunciats de les preguntes amb l'ordre que vulguis</h5>


    <div id="dataView" class="block">
        <div class="table">
            <table id="general-table" class="table table-striped table-vcenter">
                <thead>
                <tr>
                    <th style="width: 150px;" class="text-center">&nbsp;</th>
                    <th style="width: 80%;"><a href="#">enunciat</a></th>
                    <th style="width: 15%;"><a href="#">interval</a></th>
                </tr>
                </thead>
                <tbody  id="sortable">
                <tr th:each="pregunta, row : ${enquesta.preguntes}"
                     th:id="'pregunta_' + ${pregunta.id}">
                    <td class="ui-state-default"><span th:text="${row.index+1}">0</span></td>
                    <td class="ui-state-default"><a th:href="@{'/enquestes/' + ${enquesta.id}}" th:text="${pregunta.enunciat}" >titol</a></td>
                    <td class="ui-state-default">
                        <span th:text="${pregunta.minim}">Valor mínim</span> - <span th:text="${pregunta.maxim}">Valor màxim</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script type="text/javascript">
        $('#sortable').sortable();

        function formSubmit() {
            var s = '';
            $('#sortable  > tr').each(function(e) {s += e.id; });
            $('orderedKeyList').val(s);

        }
    </script>


    <div class="btn-group">
        <form method="POST" th:object="${enquesta}" class="form-horizontal form-bordered" onsubmit="formSubmit();return false;">
            <input type="text" name="orderedKeyList" value="2,1,3,4" />
            <input type="submit" value="Guardar" class="btn btn-sm btn-success"/>
            <a th:href="@{'/enquestes/' + ${enquesta.id}}" class="btn btn-sm btn-default">Cancelar</a>
        </form>
    </div>

</div>


</body>
</html>